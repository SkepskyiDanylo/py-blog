{% extends 'base.html' %}
{% load crispy_forms_filters %}
{% block content %}
  <a href="{% url 'blog:index' %}" class="home-button">Home</a>
  <div class="container">
    <div class="card my-2">
      <div class="card-body">
        <h3><strong>{{ post.title }}</strong></h3>
        <p class="text-muted small">{{ post.owner.first_name }} {{ post.owner.last_name }}<br>{{ post.created_time }}</p>
        <p class="text-muted small"></p>
        <div class="card my-2">
          <div class="card-body">
            <p class="post-content">{{ post.content }}</p>
          </div>
        </div>
        <br>
        <p><strong>{{ comments.count }} comment{{ comments.count|pluralize:",s" }}</strong></p>
      {% for comment in comments %}
        <div class="card my-2">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <small class="mb-0">{{ comment.user.first_name }} {{ comment.user.last_name }}</small>
              <small class="text-muted">{{ comment.created_time }}</small>
            </div>
            <p class="mt-2 mb-0">{{ comment.content }}</p>
          </div>
        </div>
      {% empty %}
        <div class="card my-2">
          <div class="card-body d-flex">
            <p>No comments yet!</p>
          </div>
        </div>
      {% endfor %}
      {% if user.is_authenticated %}
        <form method="post" novalidate>
          {% csrf_token %}
          {{ form|crispy }}
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      {% endif %}
      </div>
    </div>
  </div>

{% endblock %}